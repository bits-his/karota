{"version":3,"file":"user.js","names":["passport","require","config","_require","allowOnly","_require2","create","login","findAllUsers","findById","update","deleteUser","verifyToken","module","exports","app","post","get","authenticate","session","accessLevels","admin","put","user"],"sources":["../../src/routes/user.js"],"sourcesContent":["const passport = require('passport');\nconst config = require('../config/config');\nconst { allowOnly } = require('../services/routesHelper');\nconst { create, login, findAllUsers,\n  findById, update, deleteUser, verifyToken\n} = require('../controllers/user');\n\nmodule.exports = (app) => {\n  // create a new user\n  app.post(\n    '/users/create', create\n  );\n\n  // user login\n  app.post('/users/login', login);\n\n  //retrieve all users\n  app.get(\n    '/users',\n    passport.authenticate('jwt', {\n      session: false\n    }),\n    allowOnly(config.accessLevels.admin, findAllUsers)\n  );\n\n  // retrieve user by id\n  app.get(\n    '/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    findById\n  );\n\n  // update a user with id\n  app.put(\n    '/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.user, update)\n  );\n\n  // delete a user\n  app.delete(\n    '/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.admin, deleteUser)\n  );\n  app.get(\n    \"/verify-token\",\n    passport.authenticate(\"jwt\", { session: false }),\n    verifyToken\n  );\n};\n"],"mappings":";;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,IAAMC,MAAM,GAAGD,OAAO,CAAC,kBAAkB,CAAC;AAC1C,IAAAE,QAAA,GAAsBF,OAAO,CAAC,0BAA0B,CAAC;EAAjDG,SAAS,GAAAD,QAAA,CAATC,SAAS;AACjB,IAAAC,SAAA,GAEIJ,OAAO,CAAC,qBAAqB,CAAC;EAF1BK,MAAM,GAAAD,SAAA,CAANC,MAAM;EAAEC,KAAK,GAAAF,SAAA,CAALE,KAAK;EAAEC,YAAY,GAAAH,SAAA,CAAZG,YAAY;EACjCC,QAAQ,GAAAJ,SAAA,CAARI,QAAQ;EAAEC,MAAM,GAAAL,SAAA,CAANK,MAAM;EAAEC,UAAU,GAAAN,SAAA,CAAVM,UAAU;EAAEC,WAAW,GAAAP,SAAA,CAAXO,WAAW;AAG3CC,MAAM,CAACC,OAAO,GAAG,UAACC,GAAG,EAAK;EACxB;EACAA,GAAG,CAACC,IAAI,CACN,eAAe,EAAEV,MACnB,CAAC;;EAED;EACAS,GAAG,CAACC,IAAI,CAAC,cAAc,EAAET,KAAK,CAAC;;EAE/B;EACAQ,GAAG,CAACE,GAAG,CACL,QAAQ,EACRjB,QAAQ,CAACkB,YAAY,CAAC,KAAK,EAAE;IAC3BC,OAAO,EAAE;EACX,CAAC,CAAC,EACFf,SAAS,CAACF,MAAM,CAACkB,YAAY,CAACC,KAAK,EAAEb,YAAY,CACnD,CAAC;;EAED;EACAO,GAAG,CAACE,GAAG,CACL,gBAAgB,EAChBjB,QAAQ,CAACkB,YAAY,CAAC,KAAK,EAAE;IAC3BC,OAAO,EAAE;EACX,CAAC,CAAC,EACFV,QACF,CAAC;;EAED;EACAM,GAAG,CAACO,GAAG,CACL,gBAAgB,EAChBtB,QAAQ,CAACkB,YAAY,CAAC,KAAK,EAAE;IAC3BC,OAAO,EAAE;EACX,CAAC,CAAC,EACFf,SAAS,CAACF,MAAM,CAACkB,YAAY,CAACG,IAAI,EAAEb,MAAM,CAC5C,CAAC;;EAED;EACAK,GAAG,UAAO,CACR,gBAAgB,EAChBf,QAAQ,CAACkB,YAAY,CAAC,KAAK,EAAE;IAC3BC,OAAO,EAAE;EACX,CAAC,CAAC,EACFf,SAAS,CAACF,MAAM,CAACkB,YAAY,CAACC,KAAK,EAAEV,UAAU,CACjD,CAAC;EACDI,GAAG,CAACE,GAAG,CACL,eAAe,EACfjB,QAAQ,CAACkB,YAAY,CAAC,KAAK,EAAE;IAAEC,OAAO,EAAE;EAAM,CAAC,CAAC,EAChDP,WACF,CAAC;AACH,CAAC","ignoreList":[]}